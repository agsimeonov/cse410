function hfilter
    bel = [NaN,  NaN,  NaN,  NaN,  NaN,  NaN,  NaN, NaN;
           NaN,  NaN,  NaN,  NaN,  NaN,  NaN, 1/22, NaN;
           NaN, 1/22, 1/22, 1/22, 1/22, 1/22, 1/22, NaN;
           NaN,  NaN,  NaN,  NaN,  NaN,  NaN, 1/22, NaN;
           NaN, 1/22, 1/22, 1/22, 1/22, 1/22, 1/22, NaN;
           NaN,  NaN,  NaN,  NaN,  NaN,  NaN, 1/22, NaN;
           NaN, 1/22, 1/22, 1/22, 1/22, 1/22, 1/22, NaN;
           NaN,  NaN,  NaN,  NaN,  NaN,  NaN, 1/22, NaN;
           NaN,  NaN,  NaN,  NaN,  NaN,  NaN,  NaN, NaN];
    disp('Where NaN denotes an obstacle:');
    disp('t = 0');
    disp(bel);
    for t = 1:8
        bel = bayes(bel, t);
        fprintf('t = %i\n', t);
        disp(bel);
    end
end

function env = bayes(bel, t)
    if t <= 5
        bel(8,7) = .1 * bel(8,7);
        bel(7,7) = (.1 * bel(7,7)) + (.9 * bel(7,6));
        bel(7,6) = (.1 * bel(7,6)) + (.9 * bel(7,5));
        bel(7,5) = (.1 * bel(7,5)) + (.9 * bel(7,4));
        bel(7,4) = (.1 * bel(7,4)) + (.9 * bel(7,3));
        bel(7,3) = (.1 * bel(7,3)) + (.9 * bel(7,2));
        bel(7,2) = .1 * bel(7,2);
        bel(6,7) = .1 * bel(6,7);
        bel(5,7) = (.1 * bel(5,7)) + (.9 * bel(5,6));
        bel(5,6) = (.1 * bel(5,6)) + (.9 * bel(5,5));
        bel(5,5) = (.1 * bel(5,5)) + (.9 * bel(5,4));
        bel(5,4) = (.1 * bel(5,4)) + (.9 * bel(5,3));
        bel(5,3) = (.1 * bel(5,3)) + (.9 * bel(5,2));
        bel(5,2) = .1 * bel(5,2);
        bel(4,7) = .1 * bel(4,7);
        bel(3,7) = (.1 * bel(3,7)) + (.9 * bel(3,6));
        bel(3,6) = (.1 * bel(3,6)) + (.9 * bel(3,5));
        bel(3,5) = (.1 * bel(3,5)) + (.9 * bel(3,4));
        bel(3,4) = (.1 * bel(3,4)) + (.9 * bel(3,3));
        bel(3,3) = (.1 * bel(3,3)) + (.9 * bel(3,2));
        bel(3,2) = .1 * bel(3,2);
        bel(2,7) = .1 * bel(2,7);
    else
        bel(8,7) = (.1 * bel(8,7)) + (.9 * bel(7,7));
        bel(7,7) = (.1 * bel(7,7)) + (.9 * bel(6,7));
        bel(7,6) = .1 * bel(7,6);
        bel(7,5) = .1 * bel(7,5);
        bel(7,4) = .1 * bel(7,4);
        bel(7,3) = .1 * bel(7,3);
        bel(7,2) = .1 * bel(7,2);
        bel(6,7) = (.1 * bel(6,7)) + (.9 * bel(5,7));
        bel(5,7) = (.1 * bel(5,7)) + (.9 * bel(4,7));
        bel(5,6) = .1 * bel(5,6);
        bel(5,5) = .1 * bel(5,5);
        bel(5,4) = .1 * bel(5,4);
        bel(5,3) = .1 * bel(5,3);
        bel(5,2) = .1 * bel(5,2);
        bel(4,7) = (.1 * bel(4,7)) + (.9 * bel(3,7));
        bel(3,7) = (.1 * bel(3,7)) + (.9 * bel(2,7));
        bel(3,6) = .1 * bel(3,6);
        bel(3,5) = .1 * bel(3,5);
        bel(3,4) = .1 * bel(3,4);
        bel(3,3) = .1 * bel(3,3);
        bel(3,2) = .1 * bel(3,2);
        bel(2,2) = .1 * bel(2,2);
    end

    if t <= 4
        bel(2,7) = (.95 * (.05^3)) * bel(2,7);
        bel(3,2) = ((.95^3) * .05) * bel(3,2);
        bel(5,2) = ((.95^3) * .05) * bel(5,2);
        bel(7,2) = ((.95^3) * .05) * bel(7,2);
        bel(3,3) = (.95^4) * bel(3,3);
        bel(3,4) = (.95^4) * bel(3,4);
        bel(3,5) = (.95^4) * bel(3,5);
        bel(3,6) = (.95^4) * bel(3,6);
        bel(5,3) = (.95^4) * bel(5,3);
        bel(5,4) = (.95^4) * bel(5,4);
        bel(5,5) = (.95^4) * bel(5,5);
        bel(5,6) = (.95^4) * bel(5,6);
        bel(7,3) = (.95^4) * bel(7,3);
        bel(7,4) = (.95^4) * bel(7,4);
        bel(7,5) = (.95^4) * bel(7,5);
        bel(7,6) = (.95^4) * bel(7,6);
        bel(3,7) = (.95 * (.05^3)) * bel(3,7);
        bel(5,7) = (.95 * (.05^3)) * bel(5,7);
        bel(7,7) = (.95 * (.05^3)) * bel(7,7);
        bel(4,7) = (.05^4) * bel(4,7);
        bel(6,7) = (.05^4) * bel(6,7);
        bel(8,7) = (.95 * (.05^3)) * bel(8,7);
    elseif (t == 5) || (t == 7)
        bel(2,7) = ((.95^2) * (.05^2)) * bel(2,7);
        bel(3,2) = (.05^4) * bel(3,2);
        bel(5,2) = (.05^4) * bel(5,2);
        bel(7,2) = (.05^4) * bel(7,2);
        bel(3,3) = (.95 * (.05^3)) * bel(3,3);
        bel(3,4) = (.95 * (.05^3)) * bel(3,4);
        bel(3,5) = (.95 * (.05^3)) * bel(3,5);
        bel(3,6) = (.95 * (.05^3)) * bel(3,6);
        bel(5,3) = (.95 * (.05^3)) * bel(5,3);
        bel(5,4) = (.95 * (.05^3)) * bel(5,4);
        bel(5,5) = (.95 * (.05^3)) * bel(5,5);
        bel(5,6) = (.95 * (.05^3)) * bel(5,6);
        bel(7,3) = (.95 * (.05^3)) * bel(7,3);
        bel(7,4) = (.95 * (.05^3)) * bel(7,4);
        bel(7,5) = (.95 * (.05^3)) * bel(7,5);
        bel(7,6) = (.95 * (.05^3)) * bel(7,6);
        bel(3,7) = (.95^4) * bel(3,7);
        bel(5,7) = (.95^4) * bel(5,7);
        bel(7,7) = (.95^4) * bel(7,7);
        bel(4,7) = ((.95^3) * .05) * bel(4,7);
        bel(6,7) = ((.95^3) * .05) * bel(6,7);
        bel(8,7) = ((.95^2) * (.05^2)) * bel(8,7);
    elseif t == 6
        bel(2,7) = ((.95^3) * .05) * bel(2,7);
        bel(3,2) = (.95 * (.05^3)) * bel(3,2);
        bel(5,2) = (.95 * (.05^3)) * bel(5,2);
        bel(7,2) = (.95 * (.05^3)) * bel(7,2);
        bel(3,3) = (.05^4) * bel(3,3);
        bel(3,4) = (.05^4) * bel(3,4);
        bel(3,5) = (.05^4) * bel(3,5);
        bel(3,6) = (.05^4) * bel(3,6);
        bel(5,3) = (.05^4) * bel(5,3);
        bel(5,4) = (.05^4) * bel(5,4);
        bel(5,5) = (.05^4) * bel(5,5);
        bel(5,6) = (.05^4) * bel(5,6);
        bel(7,3) = (.05^4) * bel(7,3);
        bel(7,4) = (.05^4) * bel(7,4);
        bel(7,5) = (.05^4) * bel(7,5);
        bel(7,6) = (.05^4) * bel(7,6);
        bel(3,7) = ((.95^3) * .05) * bel(3,7);
        bel(5,7) = ((.95^3) * .05) * bel(5,7);
        bel(7,7) = ((.95^3) * .05) * bel(7,7);
        bel(4,7) = (.95^4) * bel(4,7);
        bel(6,7) = (.95^4) * bel(6,7);
        bel(8,7) = ((.95^3) * .05) * bel(8,7);
    else
        bel(2,7) = ((.95^2) * (.05^2)) * bel(2,7);
        bel(3,2) = ((.95^2) * (.05^2)) * bel(3,2);
        bel(5,2) = ((.95^2) * (.05^2)) * bel(5,2);
        bel(7,2) = ((.95^2) * (.05^2)) * bel(7,2);
        bel(3,3) = (.95 * (.05^3)) * bel(3,3);
        bel(3,4) = (.95 * (.05^3)) * bel(3,4);
        bel(3,5) = (.95 * (.05^3)) * bel(3,5);
        bel(3,6) = (.95 * (.05^3)) * bel(3,6);
        bel(5,3) = (.95 * (.05^3)) * bel(5,3);
        bel(5,4) = (.95 * (.05^3)) * bel(5,4);
        bel(5,5) = (.95 * (.05^3)) * bel(5,5);
        bel(5,6) = (.95 * (.05^3)) * bel(5,6);
        bel(7,3) = (.95 * (.05^3)) * bel(7,3);
        bel(7,4) = (.95 * (.05^3)) * bel(7,4);
        bel(7,5) = (.95 * (.05^3)) * bel(7,5);
        bel(7,6) = (.95 * (.05^3)) * bel(7,6);
        bel(3,7) = ((.95^2) * (.05^2)) * bel(3,7);
        bel(5,7) = ((.95^2) * (.05^2)) * bel(5,7);
        bel(7,7) = ((.95^2) * (.05^2)) * bel(7,7);
        bel(4,7) = ((.95^3) * .05) * bel(4,7);
        bel(6,7) = ((.95^3) * .05) * bel(6,7);
        bel(8,7) = (.95^4) * bel(8,7);
    end
    n = bel(2,7) + bel(3,2) + bel(3,3) + bel(3,4) + bel(3,5) + bel(3,6) + bel(3,7) + bel(4,7) + bel(5,2) + bel(5,3) + bel(5,4) + bel(5,5) + bel(5,6) + bel(5,7) + bel(6,7) + bel(7,2) + bel(7,3) + bel(7,4) + bel(7,5) + bel(7,6) + bel(7,7) + bel(8,7);
    bel = bel/n;
    
    env = bel;
end
